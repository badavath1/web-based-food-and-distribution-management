<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard</title>
  <style>
    body { font-family: sans-serif; margin: 0; background: #f8f9fa; }
    header { background: #2b2d42; color: white; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; }
    .logo { font-size: 1.4rem; font-weight: bold; }
    .container { padding: 2rem; }
    h2 { text-align: center; margin-bottom: 2rem; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 2rem; }
    th, td { border: 1px solid #ccc; padding: 0.75rem; text-align: left; }
    th { background-color: #edf2f4; }
    button { margin-right: 0.5rem; padding: 0.4rem 0.7rem; border: none; border-radius: 5px; cursor: pointer; }
    .approve { background: #06d6a0; color: white; }
    .reject { background: #ef476f; color: white; }
  </style>
</head>
<body>
<header>
  <div class="logo">üçΩÔ∏è FeedForword</div>
  <nav><a href="/" style="color:white; text-decoration:none;">Home</a></nav>
</header>
<div class="container">
  <h2>üìã My Donations</h2>
  <div id="donations">Loading...</div>

  <h2>üîî Notifications</h2>
  <div id="notifications">No new notifications.</div>
</div>
<script>
async function loadDonations() {
  const res = await fetch('/api/my-donations/');
  if (!res.ok) return;
  const data = await res.json();
  const list = (data.donations || []).map(d => `
    <div style="background:#fff;padding:1rem;border-radius:8px;margin-bottom:0.75rem;border:1px solid #eee;">
      <div><strong>${d.title}</strong> (x${d.quantity})</div>
      <div>${d.pickup_address}, ${d.city}</div>
      <div>Status: ${d.status}</div>
    </div>
  `).join('');
  document.getElementById('donations').innerHTML = list || 'No donations yet.';
}

async function loadNotifications() {
  const res = await fetch('/api/notifications/');
  if (!res.ok) return;
  const data = await res.json();
  const list = (data.notifications || []).map(n => `
    <div style="background:#fff;padding:0.75rem;border-radius:6px;margin-bottom:0.5rem;border:1px solid #eee;">${n.message}</div>
  `).join('');
  document.getElementById('notifications').innerHTML = list || 'No new notifications.';
}

function tick() { loadDonations(); loadNotifications(); }
tick();
setInterval(tick, 5000);
</script>
</body>
</html>
